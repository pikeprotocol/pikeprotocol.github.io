(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5fab9a3e"],{"879d":function(t,a,e){},b347:function(t,a,e){"use strict";var i=e("879d"),s=e.n(i);s.a},d11b:function(t,a){t.exports="data:image/png;base64,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"},f199:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"withdrawals"},[i("div",{staticClass:"header-wrapper flex"},[i("div",{staticClass:"flex_item"},[i("div",{staticClass:"name"},[t._v(t._s(t.$t("Your balance")))]),i("div",{staticClass:"price"},[i("span",[t._v(t._s(t.data.token_balance))]),i("span",{staticClass:"unit"},[t._v(t._s(t.token.name))])]),i("p",[t._v("USD "+t._s(t.data.token_value))])]),i("div",{staticClass:"flex_item"},[i("div",{staticClass:"name"},[t._v(" "+t._s(t.$t("Health factor"))+" "),i("img",{attrs:{src:e("d11b")},on:{click:t.lookheadth}})]),i("div",{staticClass:"price"},[t._v(t._s(t.data.health_factor))])])]),i("div",{staticClass:"panel-wrapper"},[i("div",{staticClass:"list flex flexcenter"},[i("div",[t._v(t._s(t.$t("Your mortgage")))]),i("div",[t._v("$ "+t._s(t.data.pawn_value))])]),i("div",{staticClass:"list flex flexcenter small"},[i("div",[t._v(t._s(t.$t("Equivalent to"))+" "+t._s(t.token.name)+" "+t._s(t.$t("Value")))]),i("div",[t._v(t._s(t.data.pawn_amount)+" "+t._s(t.token.name))])]),i("div",{staticClass:"list flex flexcenter"},[i("div",[t._v(" "+t._s(t.$t("Current LTV"))+" "),i("img",{attrs:{src:e("d11b")},on:{click:t.lookheadth2}})]),i("div",[t._v(t._s(t.data.rate_loan_curr))])]),i("div",{staticClass:"list flex flexcenter"},[i("div",[t._v(t._s(t.$t("Maximum LTV")))]),i("div",[t._v(t._s(t.data.rate_loan_max))])]),i("div",{staticClass:"list flex flexcenter"},[i("div",[t._v(t._s(t.$t("Liquidation threshold")))]),i("div",[t._v(t._s(t.token._rate_liquidate))])]),i("div",{staticClass:"list flex flexcenter"},[i("div",[t._v(t._s(t.$t("Collateral composition")))])]),i("div",{staticClass:"progree"},t._l(t.progreeList,(function(a,e){return i("div",{directives:[{name:"tip",rawName:"v-tip",value:a.token+": "+a.nums+" "+a.percent,expression:"item.token + ': ' + item.nums + ' ' + item.percent"}],key:e,style:t.getWidth(e)})})),0)]),i("div",{staticClass:"info-title"},[t._v(t._s(t.$t("How much do you want to withdraw?")))]),i("div",{staticClass:"input-wrapper"},[i("van-field",{attrs:{placeholder:t.$t("Please enter the amount")},scopedSlots:t._u([{key:"extra",fn:function(){return[t._v(t._s(t.token.name))]},proxy:!0}]),model:{value:t.withdraw_amount,callback:function(a){t.withdraw_amount=a},expression:"withdraw_amount"}})],1),i("div",{staticClass:"choose-type"},t._l(t.chooseType,(function(a,e){return i("div",{key:e,class:e===t.chooseIndex?"active":"",on:{click:function(a){return t.chooseTypeHandle(e)}}},[t._v(" "+t._s(a.label)+" ")])})),0),i("div",{staticClass:"remark-info"},[t._v(" "+t._s(t.$t("You can withdraw at most"))+" "+t._s(t.loanable_withdraw)+" "+t._s(t.token.name)+" ")]),i("div",{staticClass:"btn-control"},[i("div",{staticClass:"confirmBtn",on:{click:function(a){return t.next()}}},[t._v(t._s(t.$t("Continue")))]),i("div",{staticClass:"goBack",on:{click:function(a){return t.goBack()}}},[t._v(t._s(t.$t("Go back")))])])])},s=[],o=e("2f62"),l={data(){return{color:["#FF0000","#FFCC00","#22DD48","#09C7F7","#226DDD","#912BD5","#D52BB3","#C4C43C","#44A3BB","#F7F709","#11EE3D","#91766F","#808080","#7A1F56","#FF9999"],progreeList:[],loading:null,data:{},withdraw_amount:"",available_amount:0,chooseIndex:0,chooseType:[{label:"25%",value:.25},{label:"50%",value:.5},{label:"75%",value:.75},{label:"100%",value:1}]}},computed:{...Object(o["d"])(["web3","contracts","status"]),...Object(o["d"])("common",["balances","config","tokens"]),loanable_withdraw(){return parseFloat(parseFloat(this.data.withdraw_max)/10**parseFloat(this.token.decimals))>=parseFloat(this.available_amount)?parseFloat(this.available_amount):parseFloat(this.data.withdraw_max)/10**this.token.decimals},token:{get(){return this.tokens.find(t=>t.id==this.$route.query.id)||!1},set(t){}},init_data(){return 0!=this.token&&null!=this.contracts.bank},decimals(){return 1==this.token.stable?2:6}},watch:{init_data:{handler(t){1==t&&this.initData()}},loanable_withdraw:{handler(t){this.withdraw_amount=parseFloat(parseFloat(this.loanable_withdraw)*parseFloat(this.chooseType[0].value)).toFixed(this.token.decimals)}},chooseIndex:{handler(t){this.withdraw_amount=parseFloat(parseFloat(this.loanable_withdraw)*parseFloat(this.chooseType[t].value)).toFixed(this.token.decimals)}}},mounted(){this.loading=this.$toast.loading({forbidClick:!0,duration:0}),1==this.init_data&&this.initData()},beforeDestroy(){this.token=!1,this.loading=null},methods:{getWidth(t){if(this.progreeList.length>0){let a=this.progreeList[t]&&this.progreeList[t].percent||"0%",e=a.slice(0,a.length-1),i=this.progreeList[t]&&this.progreeList[t].color||this.color[t],s=0;for(let o=0;o<t;o++){let t=this.progreeList[o]&&this.progreeList[o].percent||"0%";t=t.slice(0,t.length-1),s+=Math.abs(t)}return{width:e+"%",backgroundColor:i,left:s+"%"}}return{width:"0%",backgroundColor:"#fff",left:"0%"}},lookheadth(){this.$dialog.alert({title:this.$t("Health factor"),message:this.$t("The health factor represents the safety of your loan, the proportion of its subsidiary collateral and how much money you have borrowed. Replace it to remain above 1 to be liquidated."),confirmButtonColor:"#4fa0fb"})},lookheadth2(){this.$dialog.alert({title:this.$t("Loan-to-value ratio"),message:this.$t("The maximum borrowing capacity of a particular collateral. If the value of the collateral loan is 75%, then for every 1 ETH collateral pledged, the user will be able to borrow 0.75 ETH of the principal. The loan value is specified by mortgage and expressed as a percentage."),confirmButtonColor:"#4fa0fb"})},async initData(){this.chooseIndex=0,this.$store.commit("website/SET_PAGE_TITLE",`${this.token.name} ${this.$t("Withdraw")}`),this.withdrawView(),this.available()},async available(){var t;if("ETH"==this.token.name){t=await this.web3.eth.getBalance(this.token.token_2);var a=this.web3.utils.fromWei(t,"ether");this.available_amount=parseFloat(a).toFixed(this.token.decimals)}else t=await this.contracts.bank.methods.balanceOf(this.token.token_1,this.token.token_2).call(),this.available_amount=(t/10**this.token.decimals).toFixed(this.token.decimals)},async withdrawView(){this.axios.get("/v1/site/withdraw-view",{params:{id:this.token.id}}).then(t=>{if(1==t.data.success&&(this.data=t.data,this.progreeList=t.data.structure),null!=this.loading&&(this.loading.clear(),this.loading=null),1==t.data.lock_withdraw)return this.$dialog.alert({title:this.$t("Tips"),message:this.$t("Operation in progress, please refresh later and try again")}).then(t=>{this.$router.go(-1)})}).catch(t=>{console.log(t),null!=this.loading&&(this.loading.clear(),this.loading=null)})},chooseTypeHandle(t){this.chooseIndex=t},goBack(){this.$router.go(-1)},next(){if(""==this.withdraw_amount)return this.$toast(this.$t("Please enter the amount"));if(parseFloat(this.withdraw_amount*10**this.token.decimals)>parseFloat(this.data.withdraw_max))return this.$toast(this.$t("Withdraw overdraw"));if(parseFloat(this.withdraw_amount)<=0)return this.$toast(this.$t("Amount must be greater than zero"));var t=this.withdraw_amount*10**this.token.decimals;this.$router.push({path:"/withdraw/next",query:{id:this.token.id,amount:this.$helper.numToString(t)}})}}},r=l,n=(e("b347"),e("2877")),h=Object(n["a"])(r,i,s,!1,null,null,null);a["default"]=h.exports}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-924b947a"],{"5fb1":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"withdrawals"},[s("div",{staticClass:"header-wrapper flex"},[s("div",{staticClass:"flex_item"},[s("div",[s("div",{staticClass:"name"},[t._v(t._s(t.$t("You have borrowed")))]),s("div",{staticClass:"price"},[s("span",[t._v(t._s(t.data.loan_amount))]),s("span",{staticClass:"unit"},[t._v(t._s(t.token.name)+" ")])]),s("p",[t._v(t._s(t.data.loan_value)+" USD")])]),s("div",{staticClass:"extra"},[s("div",{staticClass:"extra-title"},[t._v(" "+t._s(t.$t("Health factor"))+" "),s("img",{attrs:{src:e("d11b")},on:{click:t.lookheadth}})]),s("div",{staticClass:"price"},[t._v(t._s(t.data.health_factor))])])]),s("div",{staticClass:"flex_item"},[s("div",{staticClass:"name"},[t._v(t._s(t.$t("Wallet balance")))]),s("div",{staticClass:"price"},[s("span",[t._v(t._s(t.balance_amount))]),s("span",{staticClass:"unit"},[t._v(t._s(t.token.name))])])])]),s("div",{staticClass:"panel-wrapper"},[s("div",{staticClass:"list flex flexcenter"},[s("div",[t._v(t._s(t.$t("Your mortgage")))]),s("div",[t._v(t._s(t.data.pawn_value)+" USD")])]),s("div",{staticClass:"list flex flexcenter small"},[s("div",[t._v(t._s(t.$t("Equivalent to"))+" "+t._s(t.token.name)+" "+t._s(t.$t("Value")))]),s("div",[t._v(t._s(t.data.pawn_amount)+" "+t._s(t.token.name))])]),s("div",{staticClass:"list flex flexcenter"},[s("div",[t._v(" "+t._s(t.$t("Current LTV"))+" "),s("img",{attrs:{src:e("d11b")},on:{click:t.lookheadth2}})]),s("div",[t._v(t._s(t.data.rate_loan_curr))])]),s("div",{staticClass:"list flex flexcenter"},[s("div",[t._v(t._s(t.$t("Maximum LTV")))]),s("div",[t._v(t._s(t.data.rate_loan_max))])]),s("div",{staticClass:"list flex flexcenter"},[s("div",[t._v(t._s(t.$t("Liquidation threshold")))]),s("div",[t._v(t._s(t.token._rate_liquidate))])]),s("div",{staticClass:"list flex flexcenter"},[s("div",[t._v(t._s(t.$t("Collateral composition")))])]),s("div",{staticClass:"progree"},t._l(t.progreeList,(function(a,e){return s("div",{directives:[{name:"tip",rawName:"v-tip",value:a.token+": "+a.nums+" "+a.percent,expression:"item.token + ': ' + item.nums + ' ' + item.percent"}],key:e,style:t.getWidth(e)})})),0)]),s("div",{staticClass:"info-title"},[t._v(t._s(t.$t("How much do you have to repay?")))]),s("div",{staticClass:"input-wrapper"},[s("van-field",{attrs:{type:"number",placeholder:t.$t("Please enter the amount")},scopedSlots:t._u([{key:"extra",fn:function(){return[t._v(t._s(t.token.name))]},proxy:!0}]),model:{value:t.repay_amount,callback:function(a){t.repay_amount=a},expression:"repay_amount"}})],1),s("div",{staticClass:"choose-type"},t._l(t.chooseType,(function(a,e){return s("div",{key:e,class:e===t.chooseIndex?"active":"",on:{click:function(a){return t.chooseTypeHandle(e)}}},[t._v(" "+t._s(a.label)+" ")])})),0),s("div",{staticClass:"remark-info"},[t._v(" "+t._s(t.$t("You can repay at most"))+" "+t._s(t.data.repay_max)+" "+t._s(t.token.name)+" ")]),"ETH"!=t.token.name?s("div",{staticClass:"remark-info"},[t._v(" "+t._s(t.$t("Remaining approved quantity"))+" "+t._s(t.allowance)+" "+t._s(t.token.name)+" ")]):t._e(),s("div",{staticClass:"btn-control"},[s("div",{staticClass:"confirmBtn",on:{click:function(a){return t.next()}}},[t._v(t._s(t.$t("Continue")))]),s("div",{staticClass:"goBack",on:{click:function(a){return t.goBack()}}},[t._v(t._s(t.$t("Go back")))])])])},i=[],o=e("d0f1"),l=o["a"],r=(e("9d4f"),e("2877")),n=Object(r["a"])(l,s,i,!1,null,null,null);a["default"]=n.exports},"7cd6":function(t,a,e){},"9d4f":function(t,a,e){"use strict";var s=e("7cd6"),i=e.n(s);i.a},d0f1:function(module,__webpack_exports__,__webpack_require__){"use strict";var vuex__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("2f62");__webpack_exports__["a"]={data(){return{loading:null,balance_amount:"",allowance:"0.00",data:{},color:["#FF0000","#FFCC00","#22DD48","#09C7F7","#226DDD","#912BD5","#D52BB3","#C4C43C","#44A3BB","#F7F709","#11EE3D","#91766F","#808080","#7A1F56","#FF9999"],progreeList:[],repay_amount:"",chooseIndex:0,chooseType:[{label:"25%",value:.25},{label:"50%",value:.5},{label:"75%",value:.75},{label:"100%",value:1}]}},computed:{...Object(vuex__WEBPACK_IMPORTED_MODULE_0__["d"])(["web3","contracts","status"]),...Object(vuex__WEBPACK_IMPORTED_MODULE_0__["d"])("common",["balances","config","tokens"]),token:{get(){return this.tokens.find(t=>t.id==this.$route.query.id)||!1},set(t){}},init_data(){return 0!=this.token&&null!=this.contracts.bank},decimals(){return 1==this.token.stable?4:6}},watch:{init_data:{handler(t){1==t&&this.initData()}}},mounted(){this.loading=this.$toast.loading({forbidClick:!0,duration:0}),1==this.init_data&&this.initData()},beforeDestroy(){this.token=!1,this.loading=null},methods:{async initData(){this.$store.commit("website/SET_PAGE_TITLE",this.token.name+"还款"),this.repayView(),this.available(),this.getAllowance()},async getAllowance(){if("ETH"!=this.token.name){var tokenName=this.token.name.toLowerCase(),contract;eval("contract = this.contracts."+tokenName),contract.methods.allowance(this.web3.eth.defaultAccount,this.contracts.funds._address).call((t,a)=>{var e=a/10**this.token.decimals;this.allowance=this.$helper.formatDecimals(e,this.decimals)})}},async repayView(){this.axios.get("/v1/site/repay-view",{params:{id:this.token.id}}).then(t=>{if(1==t.data.success){this.data=t.data,this.progreeList=t.data.structure,this.data.repay_max=this.$helper.formatDecimals(this.data.repay_max,this.decimals);var a=parseFloat(parseFloat(this.data.repay_max)*parseFloat(this.chooseType[0].value));this.repay_amount=this.$helper.formatDecimals(a,this.decimals)}null!=this.loading&&(this.loading.clear(),this.loading=null)}).catch(t=>{null!=this.loading&&(this.loading.clear(),this.loading=null)})},async available(){var t;if("ETH"==this.token.name){t=await this.web3.eth.getBalance(this.web3.eth.defaultAccount);var a=this.web3.utils.fromWei(t,"ether");this.balance_amount=this.$helper.formatDecimals(a,this.decimals)}else t=await this.contracts.bank.methods.balanceOf(this.token.token_1,this.web3.eth.defaultAccount).call(),this.balance_amount=this.$helper.formatDecimals(t/10**this.token.decimals,this.decimals)},getWidth(t){if(this.progreeList.length>0){let a=this.progreeList[t]&&this.progreeList[t].percent||"0%",e=a.slice(0,a.length-1),s=this.progreeList[t]&&this.progreeList[t].color||this.color[t],i=0;for(let o=0;o<t;o++){let t=this.progreeList[o]&&this.progreeList[o].percent||"0%";t=t.slice(0,t.length-1),i+=Math.abs(t)}return{width:e+"%",backgroundColor:s,left:i+"%"}}return{width:"0%",backgroundColor:"#fff",left:"0%"}},lookheadth(){this.$dialog.alert({title:this.$t("Health factor"),message:this.$t("The health factor represents the safety of your loan, the proportion of its subsidiary collateral and how much money you have borrowed. Replace it to remain above 1 to be liquidated."),confirmButtonColor:"#4fa0fb"})},lookheadth2(){this.$dialog.alert({title:this.$t("Loan-to-value ratio"),message:this.$t("The maximum borrowing capacity of a particular collateral. If the value of the collateral loan is 75%, then for every 1 ETH collateral pledged, the user will be able to borrow 0.75 ETH of the principal. The loan value is specified by mortgage and expressed as a percentage."),confirmButtonColor:"#4fa0fb"})},chooseTypeHandle(t){this.chooseIndex=t;var a=parseFloat(parseFloat(this.data.repay_max)*parseFloat(this.chooseType[t].value));this.repay_amount=this.$helper.formatDecimals(a,this.decimals)},goBack(){this.$router.go(-1)},next(){return 0==parseFloat(this.repay_amount)||"NaN"==parseFloat(this.repay_amount)?this.$toast(this.$t("Please enter the amount")):parseFloat(this.repay_amount)<0?this.$toast(this.$t("Amount must be greater than zero")):parseFloat(this.repay_amount)>parseFloat(this.balance_amount)?this.$toast(this.$t("Your balance is insufficient")):void this.$router.push({path:"/repay/next",query:{id:this.token.id,amount:this.repay_amount}})}}}},d11b:function(t,a){t.exports="data:image/png;base64,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"}}]);
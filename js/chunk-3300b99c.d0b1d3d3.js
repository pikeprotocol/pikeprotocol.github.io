(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3300b99c"],{8823:function(t,s,e){},"885b":function(t,s,e){"use strict";e("8823")},b9c7:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"extract-wrapper"},[e("div",{staticClass:"kong"}),e("div",{staticClass:"mnd"},[e("div",{staticClass:"tit"},[t._v(t._s(t.token.name)+" "+t._s(t.$t("Transfer deposit")))]),e("div",{staticClass:"input-wrapper"},[e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.deposit_amount,expression:"deposit_amount",modifiers:{trim:!0}}],attrs:{placeholder:t.$t("Please enter the deposit amount"),type:"digit"},domProps:{value:t.deposit_amount},on:{input:function(s){s.target.composing||(t.deposit_amount=s.target.value.trim())},blur:function(s){return t.$forceUpdate()}}})]),e("div",{staticClass:"infos"},[t._v(" "+t._s(t.$t("Available Balance"))+" "+t._s(t.identity.bonus)+" "+t._s(t.token.name)+" ")])]),e("van-button",{staticClass:"bns",attrs:{disabled:t.disable_submit},on:{click:function(s){return t.beginDeposit()}}},[t._v(t._s(t.$t("Transfer deposit")))])],1)},a=[],o=e("2f62"),n={data(){return{disable_submit:!0,deposit_amount:"",gas_fee:"0.00"}},computed:{...Object(o["d"])("i18n",["locale"]),...Object(o["d"])(["web3","contracts"]),...Object(o["d"])("common",["balances","tokens","config","identity"]),token(){var t=this.tokens.find(t=>"ETH"==t.name);return null==t?{}:t}},watch:{locale(){this.initPage()},identity:{handler(t){""==this.deposit_amount&&(this.deposit_amount=t.bonus)}},deposit_amount(){void 0!=this.token.name&&this.getGas()}},mounted(){this.initPage(),this.identity instanceof Object&&(this.deposit_amount=this.identity.bonus),void 0!=this.token.name&&this.getGas()},methods:{initPage(){this.$store.commit("website/SET_PAGE_TITLE",this.$t("Transfer deposit"))},getGas(){""!=this.deposit_amount&&0!=parseFloat(this.deposit_amount)&&(this.disable_submit=!0,this.axios.post("/v1/site/expend-bonus-gas",{token:this.token.name,uid:this.web3.eth.defaultAccount,amount:this.deposit_amount,type:"deposit"}).then(t=>{this.disable_submit=!1,this.gas_fee=t.data.gas}).catch(t=>{}))},beginDeposit(){return""==this.deposit_amount?this.$toast(this.$t("Please enter the deposit amount")):parseFloat(this.deposit_amount)>parseFloat(this.identity.bonus)?this.$toast(`${this.$t("Available Balance")} ${this.identity.bonus} ETH`):parseFloat(this.deposit_amount)<parseFloat(this.config.deposit_min_bonus)?this.$toast("The transfer deposit amount cannot be less than {num}{token}",{num:this.config.deposit_min_bonus,token:"ETH"}):parseFloat(this.deposit_amount)<0?this.$toast(this.$t("Amount must be greater than zero")):void this.$dialog.confirm({title:this.$t("Tips"),message:this.$t("This operation requires payment of Oraclize fee {num}{token}",{num:this.gas_fee,token:this.token.name})}).then(t=>{if(parseFloat(this.deposit_amount)<parseFloat(this.gas_fee))return this.$toast(this.$t("Your balance is insufficient"));this.deposit()}).catch(t=>{})},deposit(){var t=this.$toast.loading({forbidClick:!0,duration:0});this.axios.get("/v1/site/deposit-bonus-validate",{params:{amount:this.deposit_amount}}).then(s=>{if(1==s.data.success){var e={from:this.web3.eth.defaultAccount,value:0};this.contracts.bank.methods.depositBonus(s.data.amount).send(e,(s,e)=>{s||setTimeout(()=>{t.clear(),this.$toast(this.$t("Send successfully, please wait for confirmation")),setTimeout(()=>{this.$router.go(-1)},1e3)},1e3)}).on("error",e=>{t.clear(),this.$toast(s.data.message)})}else t.clear()}).catch(s=>{t.clear()})}}},u=n,d=(e("885b"),e("2877")),r=Object(d["a"])(u,i,a,!1,null,null,null);s["default"]=r.exports}}]);
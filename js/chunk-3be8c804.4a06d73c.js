(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3be8c804"],{b6f9:function(t,a,s){"use strict";s.r(a);var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"withdrawals-submit"},[s("div",{staticClass:"info-title"},[t._v(t._s(t.$t("Withdraw")))]),s("div",{staticClass:"remark-info"},[t._v(t._s(t.$t("Your transaction details")))]),s("div",{staticClass:"panel-wrapper"},[s("div",{staticClass:"list flex flexcenter align"},[s("div",{staticClass:"name"},[t._v(t._s(t.$t("Amount")))]),s("div",{},[s("p",{staticClass:"eth"},[t._v(t._s(t.data.withdraw_amount)+" "+t._s(t.token.name))]),s("p",[t._v("$"+t._s(t.data.withdraw_value))])])]),s("div",{staticClass:"list flex flexcenter"},[s("div",{staticClass:"name"},[t._v(t._s(t.$t("Current health factor")))]),s("div",{staticClass:"blue"},[t._v(t._s(t.data.health_factor))])]),s("div",{staticClass:"list flex flexcenter"},[s("div",{staticClass:"name"},[t._v(t._s(t.$t("Next fitness factor")))]),s("div",{staticClass:"blue"},[t._v(t._s(t.data.health_factor2))])])]),s("div",{staticClass:"btn-control"},[s("div",{staticClass:"confirmBtn",on:{click:function(a){return t.submit()}}},[t._v(t._s(t.$t("Submit")))]),s("div",{staticClass:"goBack",on:{click:function(a){return t.goBack()}}},[t._v(t._s(t.$t("Go back")))])])])},e=[],n=s("2f62"),o={data(){return{loading:null,data:{}}},computed:{...Object(n["d"])(["web3","contracts","status"]),...Object(n["d"])("common",["balances","config","tokens"]),token:{get(){return this.tokens.find(t=>t.id==this.$route.query.id)||!1},set(t){}},withdraw_amount(){return parseFloat(this.$route.query.amount)},withdraw_value(){return this.withdraw_amount*this.token.price},init_data(){return 0!=this.token&&null!=this.contracts.bank}},watch:{init_data:{handler(t){1==t&&this.withdrawNext()}}},mounted(){this.loading=this.$toast.loading({forbidClick:!0,duration:0}),1==this.init_data&&this.withdrawNext()},beforeDestroy(){this.token=!1,this.loading=null},methods:{async withdrawNext(){if(parseFloat(this.$route.query.amount)<=0)return this.$toast(this.$t("Amount must be greater than zero"));this.axios.post("/v1/site/withdraw-next",{id:this.$route.query.id,amount:this.$route.query.amount}).then(t=>{null!=this.loading&&(this.loading.clear(),this.loading=null),1==t.data.success?this.data=t.data:this.$toast(t.data.message)}).catch(t=>{null!=this.loading&&(this.loading.clear(),this.loading=null)})},goBack(){this.$router.go(-1)},submit(){var t=this.$toast.loading({forbidClick:!0,duration:0});this.axios.post("/v1/chain/withdraw",{id:this.token.id,amount:this.data.withdraw_wei}).then(a=>{t.clear(),this.$dialog.alert({title:this.$t("Tips"),message:a.data.message,confirmButtonColor:"#4fa0fb"}).then(()=>{1==a.data.success&&this.$router.go(-2)})}).catch(a=>{t.clear()})}}},r=o,l=(s("baaf"),s("2877")),c=Object(l["a"])(r,i,e,!1,null,null,null);a["default"]=c.exports},baaf:function(t,a,s){"use strict";var i=s("c5c1"),e=s.n(i);e.a},c5c1:function(t,a,s){}}]);
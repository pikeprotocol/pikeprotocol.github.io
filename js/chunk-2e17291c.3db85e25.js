(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e17291c"],{1895:function(i,t,e){"use strict";e.r(t);var s=function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticClass:"members-wrapper"},[e("div",{staticClass:"level-wrapper"},[e("div",{staticClass:"tit"},[i._v(i._s(i.$t("Subscription mining pool")))]),e("div",{staticClass:"valus underline"},[i._v("$ "+i._s(i.miner_price_value))]),e("div",{staticClass:"valus valus2"},[i._v("ETH "+i._s(i.miner_price_amount))])]),e("div",{staticClass:"bns",on:{click:function(t){return i.validateMiner()}}},[i._v(i._s(i.$t("Buy")))])])},n=[],a=e("2f62"),r={data(){return{has_tips:!0}},computed:{...Object(a["d"])("i18n",["locale"]),...Object(a["d"])(["web3","contracts"]),...Object(a["d"])("common",["identity","tokens","config"]),miner_price_value(){return 0==this.tokens.length||void 0==this.config?"0.00":this.config.pool_mining_price},miner_price_amount(){if(0==this.tokens.length)return"0.00";if(void 0==this.config)return"0.00";var i=this.tokens.find(i=>"ETH"==i.name);return parseFloat(this.miner_price_value/i.price).toFixed(6)}},watch:{locale(){this.initPage()},"identity.is_pool":{handler(i){if(1==i){if(0==this.has_tips)return;this.$dialog.alert({title:this.$t("Tips"),message:this.$t("You are already a mining pool, no need to repeat purchase")}).then(i=>{this.$router.go("-1")})}}}},mounted(){this.initPage()},methods:{initPage(){this.$store.commit("website/SET_PAGE_TITLE",this.$t("Subscription mining pool"))},validateMiner(){var i=this.$toast.loading({message:this.$t("Being paid"),forbidClick:!0,duration:0});this.axios.get("/v1/site/miner-lock",{params:{uid:this.web3.eth.defaultAccount}}).then(t=>{i.clear(),this.buyMiner()}).catch(t=>{i.clear()})},minerUnlock(){this.$helper.cache.set("__miner_unlock",{params:{uid:this.web3.eth.defaultAccount,token:""}})},buyMiner(){var i=this.tokens.find(i=>"ETH"==i.name),t=this.web3.utils.toWei(parseFloat(1.0005*this.config.pool_mining_price/i.price).toString(),"ether"),e={from:this.web3.eth.defaultAccount,value:t},s=this.$toast.loading({message:this.$t("Being paid"),forbidClick:!0,duration:0});this.contracts.bank.methods.buyMiner().send(e,(i,t)=>{i||(this.has_tips=!1,setTimeout(()=>{s.clear(),this.$root.initData(),this.disabled_mining=!0,this.$helper.cache.set("_disabled_mining",!0),this.$dialog.alert({title:this.$t("Tips"),message:this.$t("Payment is successful, please wait for confirmation")}).then(i=>{this.$router.go(-1)})},1e3))}).on("receipt",i=>{this.$root.initData(),this.disabled_mining=!0}).on("error",i=>{s.clear(),this.minerUnlock()})}}},o=r,c=(e("d418"),e("2877")),l=Object(c["a"])(o,s,n,!1,null,null,null);t["default"]=l.exports},"6eca":function(i,t,e){},d418:function(i,t,e){"use strict";var s=e("6eca"),n=e.n(s);n.a}}]);
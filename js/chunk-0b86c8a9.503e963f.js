(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b86c8a9"],{6630:function(t,e,a){"use strict";var i=a("e9c7"),s=a.n(i);s.a},"82e6":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"members-wrapper"},[a("div",{staticClass:"level-wrapper"},[a("div",{staticClass:"tit"},[t._v(t._s(t.$t("Activation fee")))]),a("div",{staticClass:"valus underline"},[t._v("$ "+t._s(t.data.active_fee))]),a("div",{staticClass:"valus valus2"},[t._v("ETH "+t._s(t.eth_value))])]),a("div",{staticClass:"bns",on:{click:function(e){return t.beginActive()}}},[t._v(t._s(t.$t("Confirm activation")))])])},s=[],n=a("2f62"),o={data(){return{loading:null,data:{}}},computed:{...Object(n["d"])(["web3","contracts"]),...Object(n["d"])("common",["balances","tokens","config"]),token(){return this.tokens.find(t=>"ETH"==t.name)},gas_fee(){return null==this.config?"0.000000":this.config.gas_fee_amount},eth_amount(){var t=this.tokens.find(t=>"ETH"==t.name);if(null==t)return"0.00000";var e=(parseFloat(this.data.active_fee)+.08)/t.price;return e+=parseFloat(this.config.gas_fee_amount),parseFloat(e*10**t.decimals).toString()},eth_value(){var t=this.tokens.find(t=>"ETH"==t.name);return null==t||void 0==this.data.active_fee?"0.00000":parseFloat((parseFloat(this.data.active_fee)+.08)/parseFloat(t.price)).toFixed(6)}},watch:{"contracts.bank":{handler(t){this.initData()}}},mounted(){this.$store.commit("website/SET_PAGE_TITLE",this.$t("Activate user")),this.contracts.bank instanceof Object&&this.initData()},beforeDestroy(){null!=this.loading&&this.loading.clear()},methods:{async initData(){var t=this.$toast.loading({forbidClick:!0,duration:0});this.axios.get("/v1/site/active").then(e=>{t.clear(),1==e.data.success?(this.data=e.data,null!=e.data.tx&&(this.loading=this.$toast.loading({message:this.$t("Confirming activation"),forbidClick:!1,duration:0}),this.receipt(e.data.tx))):this.$toast(e.data.message)}).catch(e=>{t.clear()})},receipt(t){this.web3.eth.getTransactionReceipt(t).then(e=>{if(null!=e){this.loading.clear();var a=this.contracts.bank._address.toLowerCase(),i=e.to.toLowerCase();i==a?this.$dialog.alert({title:this.$t("Tips"),message:this.$t("Cannot be reactivated")}).then(t=>{this.$router.go(-1)}):this.$dialog.alert({title:this.$t("Tips"),message:this.$t("Please reactivate")})}else setTimeout(()=>{this.receipt(t)},1e3)})},beginActive(){this.tokens.find(t=>"ETH"==t.name);var t=this.eth_amount,e={from:this.web3.eth.defaultAccount,value:t},a=localStorage.getItem("__invite");if(null==a)return this.$toast(this.$t("The referrer does not exist, please revisit the address of your referrer"));this.$dialog.confirm({title:this.$t("Tips"),message:this.$t("This operation requires payment of Oraclize fee {num}{token}",{num:this.gas_fee,token:this.token.name})}).then(t=>{this.active(a,e)}).catch(t=>{})},active(t,e){var a=e.value,i=this.$toast.loading({message:this.$t("Being paid"),forbidClick:!0,duration:0});this.contracts.bank.methods.activeUser(t).send(e,(t,e)=>{t||(this.$helper.cache.set("__active_user_tx",{params:{who:this.web3.eth.defaultAccount,amount:a,tx:e}}),this.initData(),setTimeout(()=>{i.clear(),this.$dialog.alert({title:this.$t("Tips"),message:this.$t("Payment is successful, please wait for confirmation")}).then(t=>{this.$router.go(-1)})},1e3))}).on("receipt",t=>{this.initData()}).on("error",t=>{i.clear()})}}},r=o,c=(a("6630"),a("2877")),l=Object(c["a"])(r,i,s,!1,null,null,null);e["default"]=l.exports},e9c7:function(t,e,a){}}]);
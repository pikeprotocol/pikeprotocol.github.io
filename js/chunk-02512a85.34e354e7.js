(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02512a85"],{"20e2":function(t,e,n){},3003:function(t,e,n){"use strict";function s(t,e,n){t.$set(t.$data._asyncComputed[e],"state",n),t.$set(t.$data._asyncComputed[e],"updating","updating"===n),t.$set(t.$data._asyncComputed[e],"error","error"===n),t.$set(t.$data._asyncComputed[e],"success","success"===n)}function a(t){return"function"===typeof t?t:t.get}function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function o(t){return i(t,"lazy")&&t.lazy}function c(t,e){return t[r+e]}var r="async_computed$lazy_active$",u="async_computed$lazy_data$";function l(t,e,n){t[r+e]=!1,t[u+e]=n}function d(t){return{get:function(){return this[r+t]=!0,this[u+t]},set:function(e){this[u+t]=e}}}function h(t,e,n){t[u+e]=n}function f(t,e){return t[u+e]}var p=function(t){return function(){var e=this;return t.watch.forEach((function(t){var n=t.split(".");if(1===n.length)e[t];else try{var s=e;n.forEach((function(t){s=s[t]}))}catch(a){throw a}})),t.get.call(this)}},m=function(t){return function(){return t.watch.call(this),t.get.call(this)}};function v(t){if("function"===typeof t.watch)return m(t);if(Array.isArray(t.watch))return t.watch.forEach((function(t){if("string"!==typeof t)throw new Error("AsyncComputed: watch elemnts must be strings")})),p(t);throw Error("AsyncComputed: watch should be function or an array")}var _="function"===typeof Symbol?Symbol("did-not-update"):{},y=function(t,e){return function(){return t.shouldUpdate.call(this)?e.call(this):_}},k=function(t){return _===t},w="_async_computed$",C={install:function(t,e){e=e||{},t.config.optionMergeStrategies.asyncComputed=t.config.optionMergeStrategies.computed,t.mixin({data:function(){return{_asyncComputed:{}}},computed:{$asyncComputed:function(){return this.$data._asyncComputed}},beforeCreate:function(){var t=this.$options.asyncComputed||{};if(Object.keys(t).length){for(var n in t){var s=$(n,t[n]);this.$options.computed[w+n]=s}this.$options.data=b(this.$options,e)}},created:function(){for(var n in this.$options.asyncComputed||{}){var s=this.$options.asyncComputed[n],a=T.call(this,s,e);o(s)?h(this,n,a):this[n]=a}for(var i in this.$options.asyncComputed||{})g(this,i,e,t)}})}};function g(t,e,n,i){var o=0,c=function(a){var c=++o;k(a)||(a&&a.then||(a=Promise.resolve(a)),s(t,e,"updating"),a.then((function(n){c===o&&(s(t,e,"success"),t[e]=n)})).catch((function(a){if(c===o&&(s(t,e,"error"),i.set(t.$data._asyncComputed[e],"exception",a),!1!==n.errorHandler)){var r=void 0===n.errorHandler?void 0:n.errorHandler;n.useRawError?r(a,t,a.stack):r(a.stack)}})))};i.set(t.$data._asyncComputed,e,{exception:null,update:function(){t._isDestroyed||c(a(t.$options.asyncComputed[e]).apply(t))}}),s(t,e,"updating"),t.$watch(w+e,c,{immediate:!0})}function b(t,e){var n=t.data,s=t.asyncComputed||{};return function(t){var a=("function"===typeof n?n.call(this,t):n)||{};for(var i in s){var c=this.$options.asyncComputed[i],r=T.call(this,c,e);o(c)?(l(a,i,r),this.$options.computed[i]=d(i)):a[i]=r}return a}}function $(t,e){if("function"===typeof e)return e;var n=e.get;if(i(e,"watch")&&(n=v(e)),i(e,"shouldUpdate")&&(n=y(e,n)),o(e)){var s=n;n=function(){return c(this,t)?s.call(this):f(this,t)}}return n}function T(t,e){var n=null;return"default"in t?n=t.default:"default"in e&&(n=e.default),"function"===typeof n?n.call(this):n}"undefined"!==typeof window&&window.Vue&&window.Vue.use(C),e["a"]=C},4824:function(t,e,n){"use strict";var s=n("20e2"),a=n.n(s);a.a},8040:function(t,e,n){},"8df4a":function(t,e,n){"use strict";var s=n("8040"),a=n.n(s);a.a},c805:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"deposit-wrapper"},[n("van-tabs",{attrs:{sticky:"","line-width":"50px"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("van-tab",{attrs:{title:t.$t("All tokens")}},[n("Tokens",{attrs:{stable:null}})],1),n("van-tab",{attrs:{title:t.$t("Stable tokens")}},[n("Tokens",{attrs:{stable:1}})],1)],1)],1)},a=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"deposit-all-wrapper"},[n("van-search",{attrs:{placeholder:t.$t("Please enter the search token name"),"input-align":"center"},on:{search:t.onSearch,cancel:t.onCancel},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),n("div",{staticClass:"content",staticStyle:{"margin-top":"0.4rem"}},[n("div",{staticClass:"content-title"},[n("div",[t._v(t._s(t.$t("Assets")))]),n("div",[t._v(t._s(t.$t("Annualized")))])]),n("div",{staticClass:"content-list"},t._l(t.tokens_1,(function(e,s){return n("div",{key:s,staticClass:"list",attrs:{name:s},on:{click:function(n){return t.tokenView(e)}}},[n("div",{staticClass:"head"},[n("div",{staticClass:"flex flexAlign"},[n("span",{staticClass:"imgs"},[n("img",{staticClass:"biname",attrs:{src:e.img}})]),n("span",[t._v(t._s(e.name))])]),n("div",{staticClass:"ds"},[n("p",{staticClass:"red"},[t._v(t._s(e._rate_deposit_year))]),n("p",{staticClass:"small"},[n("span",{staticClass:"mncs"},[t._v(" Past 30D Avg ")]),t._v(" "+t._s(e._rate_deposit_30day)+" ")])])])])})),0)]),n("div",{staticClass:"tri"},[t._v(" "+t._s(t.$t("If making a deposit, please transfer any of these tokens to your wallet."))+" ")]),n("div",{staticClass:"content"},[n("div",{staticClass:"content-list"},t._l(t.tokens_2,(function(e,s){return n("div",{key:s,staticClass:"list",attrs:{name:s},on:{click:function(n){return t.tokenView(e)}}},[n("div",{staticClass:"head"},[n("div",{staticClass:"flex flexAlign"},[n("span",{staticClass:"imgs"},[n("img",{staticClass:"biname",attrs:{src:e.img}})]),n("span",[t._v(t._s(e.name))])]),n("div",{staticClass:"green ds"},[n("p",{staticClass:"red"},[t._v(t._s(e._rate_deposit_year))]),t._m(0,!0),n("p",[t._v(t._s(e._rate_deposit_year))])])])])})),0)])],1)},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"small"},[n("span",{staticClass:"mncs"}),t._v(" Past 30D Avg ")])}],c=n("2f62"),r=n("2b0e"),u=n("3003");r["default"].use(u["a"]);var l={data(){return{keyword:"",tokens_1:[],tokens_2:[],loading:!1,finished:!1,currentPage:1}},props:{stable:{type:Number,required:!1}},computed:{...Object(c["d"])(["contracts","web3"]),...Object(c["d"])("common",["tokens"])},watch:{tokens:{handler(t){t instanceof Object&&(this.tokens_1=[],this.tokens_2=[],this.setTokens(this.tokens))}}},mounted(){this.tokens instanceof Object&&(this.tokens_1=[],this.tokens_2=[],this.setTokens(this.tokens))},methods:{onSearch(t){this.axios.get("/v1/site/tokens",{params:{"TokensSearch[name]":t}}).then(t=>{this.tokens_1=[],this.tokens_2=[],this.setTokens(t.data.items)}).catch(t=>{})},onCancel(){this.tokens_1=[],this.tokens_2=[],this.setTokens(this.tokens)},async setTokens(t){for(let n of t){var e=await this.getTokenBalance(n);n.token_balance=e,1==this.stable&&0==n.stable||(parseFloat(e)>0?this.tokens_1.push(n):this.tokens_2.push(n))}},tokenBalance(t){this.getTokenBalance(t).then(t=>t)},tokenView(t){this.$router.push({path:"/deposit/detail",query:{id:t.id}})},async getTokenBalance(t){var e;if("ETH"==t.name){e=await this.web3.eth.getBalance(this.web3.eth.defaultAccount);var n=this.web3.utils.fromWei(e,"ether");return parseFloat(n).toFixed(2)}return e=await this.contracts.bank.methods.balanceOf(t.token_1,this.web3.eth.defaultAccount).call(),(e/10**t.decimals).toFixed(2)}}},d=l,h=(n("4824"),n("2877")),f=Object(h["a"])(d,i,o,!1,null,null,null),p=f.exports,m={data(){return{active:0}},components:{Tokens:p},computed:{...Object(c["d"])("i18n",["locale"])},watch:{locale(){this.initPage()}},mounted(){this.initPage()},methods:{initPage(){this.$store.commit("website/SET_PAGE_TITLE",this.$t("Deposit"))}}},v=m,_=(n("8df4a"),Object(h["a"])(v,s,a,!1,null,null,null));e["default"]=_.exports}}]);